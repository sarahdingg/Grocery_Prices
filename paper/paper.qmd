---
title: "Sandwich Ingredient Prices Among Seven Canadian Grocers: Metro Has the Highest Prices "
author: 
  - Sarah Ding
thanks: "Code and data are available at: [https://github.com/sarahdingg/Grocery_Prices.git)."
date: today
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(knitr)
library(dplyr)
library(readr)

data <- read_csv("/Users/sarahding/Downloads/ingredient_cost.csv")
```


# Introduction

In this paper, we analyze the cost of making a standard sandwich at various grocery stores to determine which grocer offers the most affordable option. By examining the prices of essential sandwich ingredients—bread, ham, lettuce, and tomatoes—across multiple retailers, we aim to uncover pricing patterns that reflect each store's pricing strategy and competitiveness in offering staple food items.

The estimand in this study is the average cost of a sandwich based on consistent ingredient quantities, as well as price variations across different grocers. This represents the extent to which price differences in staple ingredients influence consumer choice and access to affordable food options.

Our results indicate that certain grocers, such as No Frills and Loblaws, offer lower average sandwich costs, while others, like Metro, are significantly more expensive. These findings suggest that grocers may adopt different pricing approaches on staple items.

Understanding the cost structure of essential food items helps reveal how grocery stores price basic meals and maintain affordability for consumers. Insights from this analysis could inform consumer choices, retailer pricing strategies, and policy discussions around food affordability, ultimately benefiting both shoppers and the grocery sector.

The remainder of this paper is structured as follows. @sec-data describes the data and methodology used for analysis. @sec-analysis-results presents the data analysis results, and finally, @sec-discussion discusses limitations related to correlation, missing data, and potential sources of bias.



# Data {#sec-data}

## Overview

The data was obtained as a SQLite file from Project Hammer [@projecthammer] and cleaned using programming language SQL [@sql] in DB browser [@dbbrowser]. The paper is completed using programming language R [@citeR] to analyze and visualize the data.

## Measurement
	
Some paragraphs about how we go from a phenomena in the world to an entry in the dataset.

## Outcome variables

In the current analysis, the outcome variable is **'price per sandwich'**, it represents the total cost of a standard sandwich at each grocer based on the prices of the ingredients (bread, ham, lettuce, and tomatoes). 

```{r}
#| echo: false
#| eval: true
#| label: tbl-outcome-var
#| tbl-cap: "Price per sandwich at various grocers, calculated by summing the average cost of each ingredient (bread, ham, lettuce, tomatoes) based on standardized quantities. This table highlights the comparative cost of making a standard sandwich at each grocery store."
#| warning: false
#| message: false

price_per_sandwich <- data %>%
  group_by(vendor) %>%
  summarise(price_per_sandwich = sum(avg_cost_per_sandwich, na.rm = TRUE)) %>%
  rename(Vendor = vendor)

# Display the table
kable(price_per_sandwich)
```

The outcome variable in this analysis is the **price per sandwich** for each grocer, which represents the total cost of purchasing the ingredients necessary to make a standard sandwich. This variable was calculated by summing the average costs of essential sandwich components—bread, ham, lettuce, and tomatoes—based on consistent quantities required for one sandwich. As shown in @tbl-outcome-var, there are noticeable differences in sandwich prices across grocers, indicating variation in pricing strategies for staple items. Grocers like No Frills and Loblaws offer more affordable options, while others, such as Metro, have higher costs. This variation in sandwich price per grocer provides insight into each store’s approach to pricing staple foods, which can influence consumer shopping decisions.

```{r}
#| label: fig-planes
#| fig-cap: Relationship between wing length and width
#| echo: false
#| warning: false
#| message: false

analysis_data <- read_csv(here::here("data/02-analysis_data/analysis_data.csv"))

analysis_data |> 
  ggplot(aes(x = width, y = length)) +
  geom_point(alpha = 0.8) +
  theme_minimal() +
  labs(x = "Wing width (mm)",
       y = "Wing length (mm)")
```

Talk way more about it. 

## Predictor variables

Add graphs, tables and text.

Use sub-sub-headings for each outcome variable and feel free to combine a few into one if they go together naturally.








# Model

The goal of our modelling strategy is twofold. Firstly,...

Here we briefly describe the Bayesian analysis model used to investigate... Background details and diagnostics are included in [Appendix -@sec-model-details].

## Model set-up

Define $y_i$ as the number of seconds that the plane remained aloft. Then $\beta_i$ is the wing width and $\gamma_i$ is the wing length, both measured in millimeters.  

\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \alpha + \beta_i + \gamma_i\\
\alpha &\sim \mbox{Normal}(0, 2.5) \\
\beta &\sim \mbox{Normal}(0, 2.5) \\
\gamma &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}

We run the model in R [@citeR] using the `rstanarm` package of @rstanarm. We use the default priors from `rstanarm`.


### Model justification

We expect a positive relationship between the size of the wings and time spent aloft. In particular...

We can use maths by including latex between dollar signs, for instance $\theta$.


# Results

Our results are summarized in @tbl-modelresults.

```{r}
#| echo: false
#| eval: true
#| warning: false
#| message: false

library(rstanarm)

first_model <-
  readRDS(file = here::here("models/first_model.rds"))
```

```{r}
#| echo: false
#| eval: true
#| label: tbl-modelresults
#| tbl-cap: "Explanatory models of flight time based on wing width and wing length"
#| warning: false

modelsummary::modelsummary(
  list(
    "First model" = first_model
  ),
  statistic = "mad",
  fmt = 2
)
```




# Discussion

## First discussion point {#sec-first-point}

If my paper were 10 pages, then should be be at least 2.5 pages. The discussion is a chance to show off what you know and what you learnt from all this. 

## Second discussion point

Please don't use these as sub-heading labels - change them to be what your point actually is.

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage

\appendix

# Appendix {-}


# Additional data details

# Model details {#sec-model-details}

## Posterior predictive check

In @fig-ppcheckandposteriorvsprior-1 we implement a posterior predictive check. This shows...

In @fig-ppcheckandposteriorvsprior-2 we compare the posterior with the prior. This shows... 

```{r}
#| eval: true
#| echo: false
#| message: false
#| warning: false
#| label: fig-ppcheckandposteriorvsprior
#| layout-ncol: 2
#| fig-cap: "Examining how the model fits, and is affected by, the data"
#| fig-subcap: ["Posterior prediction check", "Comparing the posterior with the prior"]

pp_check(first_model) +
  theme_classic() +
  theme(legend.position = "bottom")

posterior_vs_prior(first_model) +
  theme_minimal() +
  scale_color_brewer(palette = "Set1") +
  theme(legend.position = "bottom") +
  coord_flip()
```

## Diagnostics

@fig-stanareyouokay-1 is a trace plot. It shows... This suggests...

@fig-stanareyouokay-2 is a Rhat plot. It shows... This suggests...

```{r}
#| echo: false
#| eval: true
#| message: false
#| warning: false
#| label: fig-stanareyouokay
#| fig-cap: "Checking the convergence of the MCMC algorithm"
#| fig-subcap: ["Trace plot", "Rhat plot"]
#| layout-ncol: 2

plot(first_model, "trace")

plot(first_model, "rhat")
```



\newpage


# References


